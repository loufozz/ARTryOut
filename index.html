<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dismantling Your Electronics - AR experience</title>
    <meta name="description" content="Basic example for Animation Timeline component."></meta>
    <!--<script src="lib/aframe-v0.3.0.min.js"></script> -->
     <!-- does not seem to work with the version above -->
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="dist/aframe-animation-timeline-component.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>

  </head>
  <body>
    <!-- <audio src="bohemian.mp3" autoplay></audio> -->
<a-scene embedded arjs>
  <a-assets>
    <video id="testVid" muted playsinline src="miningIndustry480.mov"></video>
    <!-- https://aframe.io/docs/1.0.0/components/sound.html -->
   <!-- <audio id="soundTelling" src="warCongo.m4a" preload="auto"></audio> -->


</a-assets>

  <!-- second-->
  <!-- <a-assets>
    <audio id="soundTelling" src="belgianLegacy.mp3" preload="auto"></audio>
  </a-assets> -->



  <a-marker id="ani0" preset='custom' type='pattern' url='pattern-markerGreen.patt'>
    <!-- <a-sphere id="vidStart" color="green" radius="0.2" position="0 2 1"></a-sphere> -->
    <a-video src="#testVid" width="4" height="2.25" position="-1 -1 0" rotation="-60 0 0" opacity="0.8"></a-video>
    <a-text id="clickH" value="click screen for sound" font="punktype-msdf.json" font-image="punktype-msdf.png" color="#70F9FF" negate="false" position="-2 -4 1"></a-text>
 </a-marker>


<a-marker id="ani1" preset='custom' type='pattern' url='pattern-markerYellow.patt'>
  <!-- <a-scene id="receiver" animation-timeline__1="timeline: #myTimeline; loop: true"> -->

<a-scene id="receiver" animation-timeline__1="timeline: #myTimeline; loop: true; startEvents: myAni; pauseEvents: myPause; resumeEvents: myResume">


      <a-assets timeout="60000">
        <a-asset-item src="https://cdn.aframe.io/fonts/Roboto-msdf.json"></a-asset-item>

        <a-timeline id="myTimeline">
          <a-timeline-group>
          <a-timeline-animation select="#text1" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#text1" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#text1" name="positionchange1"></a-timeline-animation>
          <a-timeline-animation select="#text1" name="scale"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#text1" name="fadeout"></a-timeline-animation>
          <a-timeline-animation select="#text1" name="togglevisibleoff"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#text2" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#text2" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#text2" name="positionchange2"></a-timeline-animation>
          <a-timeline-animation select="#text2" name="scale"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#text2" name="fadeout"></a-timeline-animation>
          <a-timeline-animation select="#text2" name="togglevisibleoff"></a-timeline-animation>
          </a-timeline-group>



          <a-timeline-group>
            <a-timeline-animation select="#text3" name="togglevisible"></a-timeline-animation>
            <a-timeline-animation select="#text3" name="fadein"></a-timeline-animation>
            <a-timeline-animation select="#text3" name="positionchange1"></a-timeline-animation>
            <a-timeline-animation select="#text3" name="scale"></a-timeline-animation>
          </a-timeline-group>

        <a-timeline-group>
          <a-timeline-animation select="#text3" name="fadeout"></a-timeline-animation>
          <a-timeline-animation select="#text3" name="togglevisibleoff"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-animation select="#text4" name="togglevisible" offset="1000"></a-timeline-animation>
          <a-timeline-animation select="#text4" name="fadein"></a-timeline-animation>
          <a-timeline-group>


          <a-timeline-animation select="#text4" name="scale"></a-timeline-animation>
          <a-timeline-animation select="#text4" name="positionin"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#text4" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#text4" name="fadeout"></a-timeline-animation>
          <a-timeline-animation select="#text4" name="togglevisibleoff"></a-timeline-animation>

        </a-timeline>


        <a-mixin id="text"
          text="align: center; width: 3; opacity: 0; wrap-count: 17; color: #70F9FF"
          animation__fadein="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; easing: linear; autoplay: false"
          animation__fadeout="property: components.text.material.uniforms.opacity.value; from: 1; to: 0; dur: 1000; easing: linear; autoplay: false"
          animation__togglevisible="property: visible; from: false; to: true; dur: 1; autoplay: false"
          animation__togglevisibleoff="property: visible; from: true; to: false; dur: 1; autoplay: false"
          animation__scale="property: scale; from: 1 1 1; to: 4 4 4; dur: 2000; autoplay: false"
          animation__positionchange1="property: position; from: 0 -2 0; to: -4 5 1; dur: 3000; autoplay: false"
          animation__positionchange2="property: position; from: 0 -2 0; to: 3 5 2; dur: 2500; autoplay: false"
          rotation="-90 0 0"
          ></a-mixin>
      </a-assets>
      <!-- CHARACTER SET FONT: !"#$%&'()*+,-./ 0123456789 :;<=> @ ABCDEFGHIJKLMNOPQRSTUVWXYZ [\]^_' abcdefghijklmnopqrstuvwxyz {|}~

    !"#$%&'()*+,-./0123456789:;<=>@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]_'abcdefghijklmnopqrstuvwxyz-->

        <!-- <a-text id="text1" mixin="text" value="Emails" font="cyberpnuk2-msdf.json" color="#70F9FF" negate="false" rotation="-90 0 -20"></a-text>
        <a-text id="text2" mixin="text" value="Txt msg" font="cyberpnuk2-msdf.json" color="#70F9FF" negate="false" rotation="-90 0 20"
        animation__textcolor="property: text.color; from: #70F9FF; to: #8C200E; dur: 1500; autoplay: false"></a-text>
        <a-text id="text3" mixin="text" value="DMs & Notifications" font="cyberpnuk2-msdf.json" color="#70F9FF" negate="false" rotation="-90 0 -20"></a-text>
        <a-text id="text4" mixin="text" value="Emails" font="cyberpnuk2-msdf.json" color="#70F9FF" negate="false" position="0 0 0"
        animation__positionin="property: position; to: 0 2 0; dur: 2500; autoplay: false"
        animation__positionout="property: position; to: 0 2 10; dur: 1000; autoplay: false"></a-text> -->

      <a-entity id="text1" mixin="text" text="value: Emails; font: toreadore-msdf.json; font-image: toreadore-msdf.png; negate: false" rotation="-90 0 -20"></a-entity>
      <a-entity id="text2" mixin="text" text="value: Txt msg; opacity: 1; font: toreadore-msdf.json; font-image: toreadore-msdf.png; negate: false" rotation="-90 0 20"
                animation__textcolor="property: text.color; from: #FAFAFA; to: #8C200E; dur: 1500; autoplay: false"></a-entity>
      <a-entity id="text3" mixin="text" text="value: DMs & Notifications; font: toreadore-msdf.json; font-image: toreadore-msdf.png; negate: false" rotation="-90 0 -20" ></a-entity>
      <a-entity id="text4" mixin="text" text="value: Data collections of our lives; font: toreadore-msdf.json; font-image: toreadore-msdf.png; negate: false" position="0 0 0"
                animation__positionin="property: position; to: 0 2 0; dur: 2500; autoplay: false"
                animation__positionout="property: position; to: 0 2 10; dur: 1000; autoplay: false"></a-entity>

      <!-- <a-entity id="text5" mixin="text" text="value: walks 35 km in 2 days"></a-entity>

      <a-entity position="0 -0.5 -10">
        <a-entity id="box1" mixin="box" position="-4 0 0"></a-entity>
        <a-entity mixin="box"></a-entity>
        <a-entity mixin="box" position="4 0 0"></a-entity>
0 -10 0
        0 2 -3
      </a-entity>-->


      <!--<a-sky id="sky" color="#FAFAFA" animation__color="property: components.material.material.color; type: color; from: #FAFAFA; to: #111; dur: 2000; autoplay: false"></a-sky>-->


 </a-scene>
</a-marker>

<a-marker id="ani2" preset='custom' type='pattern' url='pattern-markerRedishG.patt'>
  <!-- <a-scene id="receiver" animation-timeline__1="timeline: #myTimeline; loop: true"> -->

<a-scene id="receiver2" animation-timeline__2="timeline: #myTimeline2; loop: true; startEvents: myAni2; pauseEvents: myPause2; resumeEvents: myResume2">


      <a-assets timeout="60000">
        <a-asset-item src="https://cdn.aframe.io/fonts/Roboto-msdf.json"></a-asset-item>

        <a-timeline id="myTimeline2">

          <a-timeline-group>
          <a-timeline-animation select="#image1" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image1" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image1" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image1" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image1" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image1" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image1" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image1" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image2" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image2" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image2" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image2" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image2" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image2" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image2" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image2" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image3" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image3" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image3" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image3" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image3" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image3" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image3" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image3" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image4" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image4" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image4" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image4" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image4" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image4" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image4" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image4" name="togglevisibleoff"></a-timeline-animation>


          <a-timeline-group>
          <a-timeline-animation select="#image5" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image5" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image5" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image5" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image5" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image5" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image5" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image5" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image6" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image6" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image6" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image6" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image6" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image6" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image6" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image6" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image7" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image7" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image7" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image7" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image7" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image7" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image7" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image7" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image8" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image8" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image8" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image8" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image8" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image8" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image8" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image8" name="togglevisibleoff"></a-timeline-animation>

          <a-timeline-group>
          <a-timeline-animation select="#image9" name="togglevisible"></a-timeline-animation>
          <a-timeline-animation select="#image9" name="fadein"></a-timeline-animation>
          <a-timeline-animation select="#image9" name="positionin"></a-timeline-animation>
          <a-timeline-animation select="#image9" name="scalein"></a-timeline-animation>
          </a-timeline-group>

          <a-timeline-group>
          <a-timeline-animation select="#image9" name="scaleout"></a-timeline-animation>
          <a-timeline-animation select="#image9" name="positionout"></a-timeline-animation>
          <a-timeline-animation select="#image9" name="fadeout"></a-timeline-animation>
          </a-timeline-group>
          <a-timeline-animation select="#image9" name="togglevisibleoff"></a-timeline-animation>

        <a-mixin id="image"
          material="opacity: 0.8"
          animation__fadein="property: components.material.material.opacity; from: 0; to: 0.8; dur: 500; easing: linear; autoplay: false"
          animation__fadeout="property: components.material.material.opacity; from: 0.8; to: 0; dur: 2000; easing: linear; autoplay: false"
          animation__togglevisible="property: visible; from: false; to: true; dur: 1; autoplay: false"
          animation__togglevisibleoff="property: visible; from: true; to: false; dur: 1; autoplay: false"
          animation__positionin="property: position; to: 0 0 0; dur: 2500; autoplay: false"
          animation__positionout="property: position; from: 0 0 0; to: -10 0 0; dur: 2500; autoplay: false"
          animation__scalein="property: scale; from: 1 1 1; to: 3 3 3; dur: 2000; autoplay: false"
          animation__scaleout="property: scale; from: 3 3 3; to: 1 1 1; dur: 1500; autoplay: false"
          position="4 0 0"
          rotation="-60 0 0"
          visible="false"></a-mixin>
      </a-assets>
      <a-image id="image1" mixin="image" src="boyMine.jpg"></a-image>
      <a-image id="image2" mixin="image" src="boi_coltan_congo.jpg"></a-image>
      <a-image id="image3" mixin="image" src="workers.jpg"></a-image>
      <a-image id="image4" mixin="image" src="chineseTinSeparator.jpg"></a-image>
      <a-image id="image5" mixin="image" src="childSold.jpg"></a-image>
      <a-image id="image6" mixin="image" src="mineralProcessing.jpeg"></a-image>
      <a-image id="image7" mixin="image" src="consumerAll.jpeg"></a-image>
      <a-image id="image8" mixin="image" src="consumer2.jpg"></a-image>
      <a-image id="image9" mixin="image" src="consumerFight.jpg"></a-image>
      <!-- <a-entity id="text5" mixin="text" text="value: walks 35 km in 2 days"></a-entity>

      <a-entity position="0 -0.5 -10">
        <a-entity id="box1" mixin="box" position="-4 0 0"></a-entity>
        <a-entity mixin="box"></a-entity>
        <a-entity mixin="box" position="4 0 0"></a-entity>
0 -10 0
        0 2 -3
      </a-entity>-->


      <!--<a-sky id="sky" color="#FAFAFA" animation__color="property: components.material.material.color; type: color; from: #FAFAFA; to: #111; dur: 2000; autoplay: false"></a-sky>-->


</a-scene>
</a-marker>

<a-marker id="ani3" preset='custom' type='pattern' url='pattern-pink3.patt'>

  <!-- <a-entity looop: true sound="src: #soundTelling"></a-entity> -->
   <a-sphere id="soundStart" radius="0.3" position="0 -1 0" rotation="0 0 0" color="blue"

   animation="property: position; dur: 8000; from: 0 1 0; to: 0 -1 0; dir: alternate; loop: true"
   animation__color="property: components.material.material.color; type: color; dur: 8000; from: red; to: blue;
   dir: alternate; loop: true">

     <!-- <a-animation attribute="intensity" dur="2000" from="1" to="3" direction='alternate-reverse'
     repeat="indefinite" easing="linear"></a-animation> -->
   </a-sphere>
   <a-entity id="mySoundTest" loop="true" sound="src: url(warCongo.m4a)"></a-entity>
  <!-- <a-entity sound="src: #soundTelling; volume: 0.75; loop: false" material="opacity:0.5"
  autoplay="false" geometry="primitive: box"
  position="0 0 0" scale="1 1 1" color="#FF0000" audio-toggle="playing: false"></a-entity> -->
</a-marker>


<a-entity camera></a-entity>

    </a-scene>

    <!--githubcorner
    <a href="https://github.com/supermedium/superframe/tree/master/components/animation-timeline/examples/basic/" class="github-corner">
      <svg width="80" height="80" viewBox="0 0 250 250" style="fill: #111; color: #EFEFEF; position: fixed; bottom: 0; border: 0; left: 0; transform: rotate(180deg); opacity: 0.8">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
      </svg>
    </a> -->
    <!--<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
    </style>-->
    <!--endgithubcorner-->

 <script>
//     AFRAME.registerComponent("marking", {
//     init: function() {
//       console.log("Initializing");
//    this.marker = document.getElementById("ani1");
//    this.markerVisible = false
// },
// tick: function() {
//    if (!this.marker) return
//    if (this.marker.object3D.visible) {
//       if (!this.markerVisible) {
//          // marker detected
//          this.markerVisible = true
//          console.log("marker is showing")
//       }
//    } else {
//       if (this.markerVisbile) {
//          // lost sight of the marker
//          this.markerVisible = false
//       }
//    }
// }
// })-->

window.onload = function(){
  let videoNumToPlay =0;
  let soundNumToPlay =0;

  console.log("ready for debug");


//let m = document.getElementById("ani1");
let el = document.getElementById("receiver");
let el2 = document.getElementById("receiver2");
let m = document.getElementsByTagName("a-marker");
// let tVid = document.getElementById("vidStart");
// let tSound = document.getElementById("soundStart");

console.log("markers:: ");
console.log(m);

let firstTime = false;
let firstTime2 = false;
//document.getElementById("vidStart")
window.onclick = function(){
console.log("video loaded");
document.getElementById("testVid").muted =false;
document.getElementById("clickH").components.text.material.uniforms.opacity.value =0;
}

el.style.display = "none";
el2.style.display = "none";


m[0].addEventListener("markerFound", (e)=>{
  // ensure that the animation element is not visible...
  el.style.display = "none";
  el2.style.display = "none";
   console.log("found ani 0");
   console.log(m[0]);
   //play the video
   console.log( document.getElementById("testVid"));
   if(document.getElementById("testVid").currentTime === 0){

//  setInterval( testFunc, 1000);
   document.getElementById("testVid").play();
   console.log("play");
 }
 else{
   document.getElementById("testVid").play();
 }

});

/*function testFunc(){
  console.log("dur:: "+document.getElementById("testVid").duration);
  console.log("curr:: "+document.getElementById("testVid").currentTime );
}*/

 document.getElementById("testVid").onended = function(){
   console.log("ended");

   if(videoNumToPlay <5){
     videoNumToPlay +=1;
   }
   //reset
   else{
      videoNumToPlay =0;
   }

   if(videoNumToPlay ===1){
       document.getElementById("testVid").src = "permit480.mov";
   }

   if(videoNumToPlay ===2){
      document.getElementById("testVid").src = "bisieMining480.mov";

   }
   if(videoNumToPlay ===3){
      document.getElementById("testVid").src = "corporateSustainability.mov";

   }
   if(videoNumToPlay ===4){
      document.getElementById("testVid").src = "cassiteriteCongo.mov";

   }
   if(videoNumToPlay ===5){
      document.getElementById("testVid").src = "sustainability.mov";

   }
   else if(videoNumToPlay ===0){
     document.getElementById("testVid").src = "miningIndustry480.mov";

   }


  console.log("and now ... "+  document.getElementById("testVid"));
   document.getElementById("testVid").play();

 }


m[0].addEventListener("markerLost", (e)=>{
   console.log("lost video marker");
  //console.log(document.getElementById("testVid").currentTime);
  document.getElementById("testVid").pause();
});


m[1].addEventListener("markerFound", (e)=>{
   console.log("found ani 1");
   console.log(m[1]);
   el.style.display = "block";
   //reset currentTime of the video
   document.getElementById("testVid").currentTime =0;
   if(firstTime === false){

    el.emit("myAni");
      firstTime =true;
    }
   else{
     el.emit("myResume");
   }

});


m[1].addEventListener("markerLost", (e)=>{
   console.log("lost");
  //console.log(el.pauseAnimation());
   el.emit("myPause");
   el.style.display = "none";

   console.log(el);
});

// document.getElementById("soundStart").onclick = function(){
//   console.log("sound clicked");
//   document.querySelector('#soundTelling').components.sound.playSound();
// //  document.getElementById("soundTelling").components.sound.playSound();
// }



m[2].addEventListener("markerFound", (e)=>{
   console.log("found ani 2");
   console.log(m[3]);
   el2.style.display = "block";
   //reset currentTime of the video
   document.getElementById("testVid").currentTime =0;
   if(firstTime2 === false){

    el2.emit("myAni2");
      firstTime2 =true;
    }
   else{
     el2.emit("myResume2");
   }

});


m[2].addEventListener("markerLost", (e)=>{
   console.log("lost image");
  //console.log(el.pauseAnimation());
   el2.emit("myPause2");
   el2.style.display = "none";
   console.log(el2);
});

m[3].addEventListener("markerFound", (e)=>{


   console.log("ani 3 launched");
   let entity = document.querySelector('[sound]');
   //console.log(entity);
   entity.components.sound.playSound();
});


document.querySelector('[sound]').addEventListener('sound-ended', function(){
  console.log("sound ended");
console.log(soundNumToPlay);
if(soundNumToPlay <1){
  soundNumToPlay +=1;
  console.log("HERE");
}
//reset
  else{
      soundNumToPlay =0;
   }
 if(soundNumToPlay ===1){
   console.log("AND CHANGING");

let m = document.getElementById("mySoundTest").getAttribute("sound");
m.src = "url(belgianLegacy.m4a)";
console.log(m);
document.getElementById("mySoundTest").setAttribute("sound",m);
 }

 if(soundNumToPlay ===0){
   console.log("AND CHANGING BACK");

let m = document.getElementById("mySoundTest").getAttribute("sound");
m.src = "url(warCongo.m4a)";
console.log(m);
document.getElementById("mySoundTest").setAttribute("sound",m);
 }

 document.getElementById("mySoundTest").components.sound.playSound();
})

m[3].addEventListener("markerLost", (e)=>{
//pause
 console.log("sound pause");
  let entity = document.querySelector('[sound]');
   entity.components.sound.pauseSound();
});

// // let entity = document.querySelector('[sound]');
//
//   if(soundNumToPlay <1){
//     console.log("less than 2");
//     soundNumToPlay +=1;
//
//   }
//   //reset
//   else{
//      soundNumToPlay =0;
//   }
//
//   if(soundNumToPlay ===1){
//     console.log("sound congo");
//       // entity.components.sound.src = "warCongo.m4a";
//       // document.getElementById("soundTelling").components.sound.src = "warCongo.m4a";
//
//       document.querySelector('[sound]').components.sound.src = "belgianLegacy.mp3";
//   }
//
//   // if(soundNumToPlay ===2){
//   //    document.getElementById("soundTelling").src = "permit480.mov";
//   //
//   // }
//   else if(soundNumToPlay ===0){
//     document.querySelector('[sound]').components.sound.src = "warCongo.m4a";
//
//   }
//
//  console.log("and now next");
//   document.querySelector('[sound]').components.sound.playSound();





   //sample.emit("samplePlay");
//    document.getElementById("soundTelling").components.sound.playSound();
//
//
// });



// FROM WEBSITE: https://glitch.com/~a-frame-audio-tutorial-complete
// AFRAME.registerComponent('audio-toggle', {
//   schema: {
//     playing: {
//       type: 'boolean',
//       default: false
//     }
//   },
//   update: function() {
//     let data = this.data
//     let el = this.el
//     let playing = data.playing
//
//     m[2].addEventListener("markerFound", (e)=>{
//     if (playing === true) {
//       el.components.sound.playSound()
//     }
//
//     el.addEventListener('click', () => {
//       if (playing) {
//         el.components.sound.pauseSound()
//         playing = false
//       } else {
//         el.components.sound.playSound()
//         playing = true
//       }
//     })
//    })
//    m[2].addEventListener("markerLost", (e)=>{
//      console.log("lost sound marker");
//      el.components.sound.pauseSound()
//     })
//   }
// })


/*function testFunc(){
  console.log("dur:: "+document.getElementById("testVid").duration);
  console.log("curr:: "+document.getElementById("testVid").currentTime );
}*/

 // document.getElementById("soundTelling").addEventListener('sound-ended', function(){
 //   console.log("sound ended");
 //
 //   if(soundNumToPlay <1){
 //     soundNumToPlay +=1;
 //   }
 //   //reset
 //   else{
 //      soundNumToPlay =0;
 //   }
 //
 //   if(soundNumToPlay ===1){
 //       document.getElementById("soundTelling").src = "bl11.mp3";
 //   }
 //
 //   // if(soundNumToPlay ===2){
 //   //    document.getElementById("soundTelling").src = "permit480.mov";
 //   //
 //   // }
 //   else if(soundNumToPlay ===0){
 //     document.getElementById("soundTelling").src = "belgianLegacy.mp3";
 //
 //   }
 //
 //  console.log("and now ... "+  document.getElementById("soundTelling"));
 //   document.getElementById("soundTelling").components.sound.playSound();
 //
 // });

// m[2].addEventListener("markerLost", (e)=>{
//    console.log("lost sound marker");
//   console.log(sample);
//   document.getElementById("soundTelling").components.sound.pauseSound();
// })

/*console.log(el);
el.addEventListener('triggerA', function (event) {
  console.log("EMIT RECEIVED");
  console.log(el);
  //console.log('Entity collided with', event.detail.collidingEntity);
});*/-->
}
</script>
  </body>
</html>
